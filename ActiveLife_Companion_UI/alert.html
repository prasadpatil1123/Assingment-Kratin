<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Website with Login & Registration Form</title>
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" 
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <a class="navbar-brand" href="index.html">Active Life Campanion</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home </a>
          </li>
          <li class="nav-item active">
            <a class="nav-link" href="index.html">Add Notification Alert<span class="sr-only">(current)</span></a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="notifications.html">Notification Centre</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="jumbotron">
        <h1 class="display-4">Hello, User</h1>
        <p class="lead">Please fill following form for setting alert</p>
        <hr class="my-4">

      </div>

      <form class="container" id="apiForm">
        <div class="form-group">
          <label for="exampleFormControlInput1">User Email</label>
          <input type="email" class="form-control"  name="userId" id="userId" placeholder="name@example.com">
        </div>
        <div class="form-group">
          <label for="exampleFormControlSelect1">Alert Type</label>
          <select class="form-control" id="alertType"  name="alertType">
            <option>Water</option>
            <option>Medicine</option>
            <option>Excercise</option>
          </select>
        </div>
        <div class="form-group">
          <label for="exampleFormControlSelect2">Alert Frequency</label>
          <select class="form-control" id="frequency" name="frequency">
            <option>daily</option>
            <option>weekly</option>
            <option>monthly</option>
          </select>
        </div>

        <div class="form-group">
            <label for="time">Add Time</label>
            <select class="form-control" id="time" name="time">
              <option>9:00 AM</option>
              <option>12:00 AM</option>
              <option>3:00 PM</option>
              <option>6:00 PM</option>
              <option>9:00 PM</option>
              <option>10:00 PM</option>
            </select>
          </div>
        <input type="submit" value="Submit Alert Information" class="btn btn-success">
      </form>


      <div class="card mt-5" id="footer">
        <div class="card-header">
          This Page is developed by Kashi Prasad
        </div>
        <div class="card-body">
          <blockquote class="blockquote mb-0">
            <footer class="blockquote-footer">Active Life Companion <cite title="Source Title"></cite></footer>
          </blockquote>
        </div>
      </div>


    </body>

    <script>
        $(document).ready(function() {
          $('#apiForm').submit(function(event) {
            event.preventDefault(); // Prevent form submission
    
            // Get the input values
            var id = $('#id').val();
            var userId = $('#userId').val();
            var alertType = $('#alertType').val();
            var frequency = $('#frequency').val();
            var time = $('#time').val();
    
            // Create the API request
            var apiUrl = 'http://localhost:8080/api/v1/save/alert';
            var requestData = {
              id: id,
              userId: userId,
              alertType: alertType,
              frequency: frequency,
              time: time
            };
    
            $.ajax({
              type: 'POST',
              url: apiUrl,
              data: JSON.stringify(requestData),
              contentType: 'application/json',
              success: function(response) {
                // Handle the API response here
                alert('Alert successfully Set For User');
            
                console.log(response);
              },
              error: function(error) {
                // Handle any errors that occurred during the API call
                console.error('Error:', error);
                alert('Error:', error);
              }
            });
          });
        });
      </script>
      
</html>